/*! (C) WebReflection Mit Style License */
(function(e){function c(e,t,n,r){for(var i,s=h(t,e),o=n.slice(),u=0,a=o.length;u<a;u++){i=o[u],typeof i=="object"&&typeof i.handleEvent=="function"?i.handleEvent(s):i.call(e,s);if(s.stoppedImmediatePropagation)break}return r&&!s.stoppedPropagation&&e.parentNode?e.parentNode.dispatchEvent(s):!s.defaultPrevented}function h(e,t){return e.currentTarget||(e.currentTarget=t),e.eventPhase=(e.target||e._target)===e.currentTarget?2:3,e}function p(e,t){var n=e.length;while(n--&&e[n]!==t);return n}function d(t){return t||(t=e.event),t.timeStamp||(t.timeStamp=(new Date).getTime()),t}if(document.createEvent)return;var t=!0,n="__IE8__"+Math.random(),r=Object.defineProperties||function(e,t){for(var n in t)i.call(t,n)&&Object.defineProperty(e,n,t[n])},i=Object.prototype.hasOwnProperty,s=e.Element.prototype,o=e.Event.prototype,u=e.HTMLDocument.prototype,a=e.Window.prototype,f=/^[a-zA-Z]+$/,l={};r(s,{addEventListener:{value:function(t,r,s){var o=this,u="on"+t,a=o[n]||Object.defineProperty(o,n,{value:{}})[n],h=a[u]||(a[u]={}),v=h.h||(h.h=[]),m;if(!i.call(h,"w")){h.w=function(e){return c(o,d(e),v)};if(!i.call(l,u))if(f.test(t))try{m=document.createEventObject(),o.cloneNode(!0).fireEvent(u,m),l[u]=!0,o.attachEvent(u,h.w)}catch(m){l[u]=!1}else l[u]=!1;h.n=l[u]}e.console&&(console.log(t),console.log(p(v,r)),console.log(v.join(", "))),p(v,r)<0&&v[s?"unshift":"push"](r)}},dispatchEvent:{value:function(e){var t=this,r="on"+e.type,i=t[n],s=i&&i[r],o=!!s;return o&&s.n?t.fireEvent(r,e):o&&c(t,(e._target=t)&&e,s.h,!0)}},removeEventListener:{value:function(e,t,r){var i=this,s="on"+e,o=i[n],u=o&&o[s],a=u&&u.h,f=a?p(a,t):-1;-1<f&&a.splice(f,1)}}}),r(o,{target:{get:function(){return this.srcElement}},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0,this.returnValue=!1)}},stopPropagation:{value:function(){this.stoppedPropagation=!0,this.cancelBubble=!0}},stopImmediatePropagation:{value:function(){this.stoppedImmediatePropagation=!0,this.stopPropagation()}},initEvent:{value:function(e,t,n){this.type=e,this.bubbles=!!t,this.cancelable=!!n,this.bubbles||this.stopPropagation()}}}),r(u,{addEventListener:{value:function(e,n,r){var i=this;s.addEventListener.call(i,e,n,r),t&&e==="DOMContentLoaded"&&!/loaded|complete/.test(i.readyState)&&(t=!1,function o(t){try{i.documentElement.doScroll("left"),t=i.createEvent("Event"),t.initEvent(e,!0,!0),i.dispatchEvent(t)}catch(n){setTimeout(o,50)}}())}},dispatchEvent:{value:s.dispatchEvent},removeEventListener:{value:s.removeEventListener},createEvent:{value:function(e){var t;if(e!=="Event")throw new Error("unsupported "+e);return t=document.createEventObject(),t.timeStamp=(new Date).getTime(),t}}}),r(a,{addEventListener:{value:function(t,r,i){var s=e,o="on"+t,u;s[o]||(s[o]=function(e){return c(s,d(e),u)}),u=s[o][n]||(s[o][n]=[]),p(u,r)<0&&u[i?"unshift":"push"](r)}},dispatchEvent:{value:function(t){var n=e["on"+t.type];return n?n.call(e,t):!1}},removeEventListener:{value:function(t,r,i){var s="on"+t,o=(e[s]||Object)[n],u=o?p(o,r):-1;-1<u&&o.splice(u,1)}}})})(this);